<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>imediagram :: {{ usuario.username }}</title>
    <link rel="stylesheet" type="text/css" href="static/style/p.css"> <!-- Adicione o estilo do feed -->
</head>

<body>
    <div class="header">
        <a href="feed.html" class="top-left">Feed</a>
        <a href="homepage.html" class="top-right">Sair</a>
    </div>

    <div class="profile-container">
        <div class="profile-picture">
            <img src="static/style/img/fotoPerfil.png" alt="Foto de Perfil">
        </div>
        <h2><span id="user-name">Carregando...</span></h2>
    </div>

    <!-- Botão "Publicar" -->
    <div class="form-container">
        <button id="publicar-btn" class="upload-btn">Publicar</button>
    </div>

    <!-- Tela semitransparente (inicialmente oculta) -->
    <div id="overlay" class="overlay">
        <div class="overlay-content">
            <form id="publicar-form" method="post" enctype="multipart/form-data">
                <textarea id="legenda" placeholder="Digite uma legenda..." required></textarea>
                <div class="upload-btn-container">
                    <label for="foto" class="upload-btn">Upload</label>
                    <input type="file" name="foto" accept="image/*" id="foto" style="display: none;">
                    <div id="file-selected-image" class="file-selected-image">
                        <img id="thumbnail" src="" alt="Miniatura da foto">
                    </div>
                </div>
                <div class="upload-btn-container">
                    <button type="submit" class="upload-btn">Publicar</button>
                </div>
            </form>
            <button id="fechar-overlay" class="upload-btn">Cancelar</button>
        </div>
    </div>

    <!-- Tela semitransparente de comentários (inicialmente oculta) -->
    <div id="overlay-comentarios" class="overlay overlay-comentarios">
        <div class="overlayContent">
            <div id="sair_cmnt">
                <button id="close-overlay-comentarios" class="upload-btn">Fechar</button>
            </div>
            <!-- Seção 1: Informações do post -->
            <div id="post-info">
                <div class="user-info">
                    <img id="post-profile-image" src="" alt="Foto de perfil" class="profile-image">
                    <p id="post-username" class="photo-username"></p>
                </div>
                <div class="square-image">
                    <img id="post-image" src="" alt="Foto do post">
                </div>
                <p id="post-caption" class="photo-caption"></p>
                <p id="post-timestamp" class="photo-timestamp"></p>
                <div class="comments-section">
                    <button class="like-button" data-post-id="${foto.id}">
                        <img src="static/style/img/like.png" alt="Curtir">
                        <span class="like-count">0</span>
                    </button>
                </div>
            </div>

            <!-- Seção 2: Área de comentários -->
            <div id="comment-section">
                <textarea id="comment-input" placeholder="Digite seu comentário..."></textarea>
                <button id="submit-comment" class="upload-btn">Comentar</button>
            </div>

            <!-- Seção 3: Lista de comentários (deslizante) -->
            <div id="comments-list">
                <!-- Os comentários serão carregados dinamicamente pelo JavaScript -->
            </div>
        </div>
    </div>

    {% if fotos %}
    <div class="photo-grid">
        {% for foto in fotos %}
        <div class="photo-item">
            <div class="square-image" data-post-id="{{ foto.id }}">
                <img src="static/fotos_posts/{{ foto.imagem }}" alt="Foto de {{ usuario.username }}">
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Scripts -->
    <script src="static/scripts/perfil.js"></script>
</body>

</html>